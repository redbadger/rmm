<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Motivation - Crux: Cross-platform app development in Rust</title>


        <!-- Custom HTML head -->
        <script async defer src="https://beampipe.io/js/tracker.js" data-beampipe-domain="redbadger.github.io"></script>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./mdbook-admonish.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Crux: Cross-platform app development in Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/redbadger/crux/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/redbadger/crux/edit/master/docs/src/motivation.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="motivation"><a class="header" href="#motivation">Motivation</a></h1>
<p>We set out to prove this approach to building apps largely because we've seen
the drawbacks of all the other approaches in real life, and thought "there must
be a better way". The two major available approaches to building the same
application for iOS and Android are:</p>
<ol>
<li>Build a native app for each platform, effectively doing the work twice.</li>
<li>Use React Native or Flutter to build the application once<sup class="footnote-reference"><a href="#once">1</a></sup> and produce
native looking and feeling apps which behave nearly identically.</li>
</ol>
<p>The drawback of the first approach is doing the work twice. In order to build
every feature for iOS and Android at the same time, you need twice the number of
people, either people who happily do Swift and Kotlin (and they are very rare),
or more likely a set of iOS engineers and another set of Android engineers. This
typically leads to forming two separate, platform-focused teams. We have
witnessed situations first-hand, where those teams struggle with the same design
problems, and despite one encountering and solving the problem first, the other
one can learn nothing from their experience (and that's <em>despite</em> long design
discussions).</p>
<p>We think such experiences with the platform native approach are common, and the
reason why people look to React Native and Flutter. The issues with React Native
are two fold</p>
<ul>
<li>Only <em>mostly</em> native user interface</li>
<li>In the case of React Native, the JavaScript ecosystem tooling disaster</li>
</ul>
<p>React Native effectively takes over, and works hard to insulate the engineer
from the native platform underneath and pretend it doesn't really exist, but of
course, inevitably, it does and the user interface ends up being built in a
combination of 90% JavaScript/TypeScript and 10% Kotlin/Swift. This was still a
major win when React Native was first introduced, because the platform native UI
toolkits were imperative, following a version of MVC architecture, and generally
made it quite difficult to get UI state management right. React on the other
hand is declarative, leaving much less space for errors stemming from the UI
getting into an undefined state. This benefit was clearly recognised by iOS and
Android, and both introduced their own declarative UI toolkit - Swift UI and
Jetpack Compose. Both of them are quite good, matching that particular advantage
of React Native, and leaving only building things once (in theory). But in
exchange, they have to be written in JavaScript (and adjacent tools and
languages).</p>
<p>The main issue with the JavaScript ecosystem is that it's built on sand. The
underlying language is quite loose and has a
<a href="https://www.destroyallsoftware.com/talks/wat">lot of inconsistencies</a>. It came
with no package manager originally, now <a href="https://www.npmjs.com/">it</a>
<a href="https://yarnpkg.com/">has</a> <a href="https://pnpm.io/">three</a>. To serve code to the
browser, it gets bundled, and the list of bundlers is too long to include here.
<a href="https://webpack.js.org/">Webpack</a>, the most popular one, is famously difficult
to configure. JavaScript was built as a dynamic language which leads to a lot of
basic human errors, which are made while writing the code, only being discovered
when running the code. Static type systems aim to solve that problem and
<a href="https://www.typescriptlang.org/">TypeScript</a> adds this onto JavaScript, but the
types only go so far (until they hit an <code>any</code> type, or dependencies with no type
definitions), and they disappear at runtime.</p>
<p>In short, upgrading JavaScript to something modern takes a lot of tooling.
Getting all this tooling set up and ready to build things is an all day job, and
so more tooling, like <a href="https://nextjs.org/">Next.js</a> has popped up providing
this configuration in a box, batteries included. Perhaps the final admission of
this problem is the recent <a href="https://biomejs.dev/blog/annoucing-biome/">Biome</a>
toolchain (formerly the Rome project), attempting to bring all the various tools
under one roof (and Biome itself is built in Rust...).</p>
<p>It's no wonder that even a working setup of all the tooling has sharp edges, and
cannot afford to be nearly as strict as tooling designed with strictness in
mind, such as Rust's. The heart of the problem is that computers are strict and
precise instruments, and humans are sloppy creatures. With enough humans (more
than 10, being generous) and no additional help, the resulting code will be
sloppy, full of unhandled edge cases, undefined behaviour being relied on,
circular dependencies preventing testing in isolation, etc. (and yes, these are
not hypotheticals).</p>
<p>Contrast that with Rust, which is as strict as it gets, and generally backs up
the claim that if it compiles it will work (and if you struggle to get it past
the compiler, it's probably a bad idea). The tooling and package management is
built in with <code>cargo</code>. There are fewer decisions to make when setting up a Rust
project.</p>
<p>In short, we think the JS ecosystem has jumped the shark, the "complexity
toothpaste" is out of the tube, and it's time to stop. But there's no real
viable alternative. Crux is our attempt to provide one.</p>
<hr />
<div class="footnote-definition" id="once"><sup class="footnote-definition-label">1</sup>
<p>In reality it's more like 1.4x effort build the same app for two platforms.</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="overview.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="getting_started/core.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="overview.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="getting_started/core.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
